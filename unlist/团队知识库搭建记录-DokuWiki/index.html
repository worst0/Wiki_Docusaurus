<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Worst's Wiki Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Worst's Wiki Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Worst's Wiki" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/worst0/Wiki_Docusaurus/static/katex/v0.12.0/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">团队知识库搭建记录 - DokuWiki | Worst&#x27;s Wiki</title><meta data-react-helmet="true" property="og:url" content="https://worst0.github.io/unlist/团队知识库搭建记录-DokuWiki"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="团队知识库搭建记录 - DokuWiki | Worst&#x27;s Wiki"><meta data-react-helmet="true" name="description" content="对比："><meta data-react-helmet="true" property="og:description" content="对比："><meta data-react-helmet="true" property="og:image" content="https://cos.ap-guangzhou.myqcloud.com/wiki-media-1253965369/doc/logo-zip.png"><meta data-react-helmet="true" name="twitter:image" content="https://cos.ap-guangzhou.myqcloud.com/wiki-media-1253965369/doc/logo-zip.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="https://cos.ap-guangzhou.myqcloud.com/wiki-media-1253965369/doc/logo-zip.png"><link data-react-helmet="true" rel="canonical" href="https://worst0.github.io/unlist/团队知识库搭建记录-DokuWiki"><link data-react-helmet="true" rel="alternate" href="https://worst0.github.io/unlist/团队知识库搭建记录-DokuWiki" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://worst0.github.io/unlist/团队知识库搭建记录-DokuWiki" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.375dfd32.css">
<link rel="preload" href="/assets/js/runtime~main.773e5c9a.js" as="script">
<link rel="preload" href="/assets/js/main.fdd59226.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><strong class="navbar__title">Power&#x27;s Wiki</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">博客</a><a href="https://wiki.wildwolf.tech/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">队内知识库</a><a href="http://digest.wiki-power.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">书摘</a><a href="https://nav.wiki-power.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">友链 &amp; 导航站</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT" style="margin-left:2px">🌙</span></div><div class="react-toggle-track-x"><span class="toggle_71bT" style="margin-left:1px">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">Power&#x27;s Wiki</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/blog">博客</a></li><li class="menu__list-item"><a href="https://wiki.wildwolf.tech/" target="_blank" rel="noopener noreferrer" class="menu__link">队内知识库</a></li><li class="menu__list-item"><a href="http://digest.wiki-power.com/" target="_blank" rel="noopener noreferrer" class="menu__link">书摘</a></li><li class="menu__list-item"><a href="https://nav.wiki-power.com/" target="_blank" rel="noopener noreferrer" class="menu__link">友链 &amp; 导航站</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">团队知识库搭建记录 - DokuWiki</h1></header><div class="markdown"><p>对比：</p><ul><li>MoinMoin Wiki</li><li>FosWiki</li><li>xwiki</li><li>mm-wiki</li><li>MinDoc</li></ul><blockquote><p>文章作者：<strong>Power Lin</strong>
原文地址：<a href="https://wiki-power.com" target="_blank" rel="noopener noreferrer">https://wiki-power.com</a><br>
版权声明：文章采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="noopener noreferrer">CC BY-NC-SA 4.0</a> 协议，转载请注明出处。</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="拓展"></a>拓展<a class="hash-link" href="#拓展" title="Direct link to heading">#</a></h2><ul><li>discussion plugin</li><li>Markdowku</li><li>MathJax plugin</li><li>Pagelist Plugin</li><li>simplenavi plugin</li><li>Wrap Plugin</li><li>Indexmenu Plugin：索引目录</li></ul><p>模板</p><ul><li>vector template</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="命名空间与文章"></a>命名空间与文章<a class="hash-link" href="#命名空间与文章" title="Direct link to heading">#</a></h2><p>DokuWiki 的文章数据在 <code>dokuwiki/data/pages</code> 目录下。命名空间相当于文件夹，<code>.txt</code> 文件相当于单篇文章。</p><p>中文目录不能正常显示的解决方法：</p><ol><li><p>进入 <code>DokuWiki</code> 目录下的 <code>/inc</code> 文件夹，打开 <code>pageutils.php</code> 文件，将如下两行注释：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// $file = urlencode($file);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// $file = str_replace(&#x27;%2F&#x27;,&#x27;/&#x27;,$file);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>将如下一行代码注释，并添加另外一行：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// return urldecode($file);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return $file;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="新增文章"></a>新增文章<a class="hash-link" href="#新增文章" title="Direct link to heading">#</a></h2><ol><li>搜索安装插件：<code>Add New Page Plugin</code></li><li>网址后缀 id 改为 <code>sidebar</code> 访问</li><li>创建页面，写入 <code>{{NEWPAGE}}</code></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="删除文章"></a>删除文章<a class="hash-link" href="#删除文章" title="Direct link to heading">#</a></h2><p>把文章内容删空，页面就自动删除了。没有文章的命名空间也会被自动移除</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="移动文章--修改名字"></a>移动文章 / 修改名字<a class="hash-link" href="#移动文章--修改名字" title="Direct link to heading">#</a></h2><ol><li>搜索安装插件：<code>Move Plugin</code></li><li>在右侧工具栏 - <code>页面重命名</code></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="定制"></a>定制<a class="hash-link" href="#定制" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="删除页面内的编辑按钮"></a>删除页面内的编辑按钮<a class="hash-link" href="#删除页面内的编辑按钮" title="Direct link to heading">#</a></h3><p><code>inc/html.php</code> 中搜索</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">return &quot;&lt;div class=&#x27;secedit editbutton_&quot; . $data[&#x27;target&#x27;] .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                   &quot; editbutton_&quot; . $secid . &quot;&#x27;&gt;&quot; .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       html_btn(&#x27;secedit&#x27;, $ID, &#x27;&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                array_merge(array(&#x27;do&#x27;  =&gt; &#x27;edit&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                  &#x27;rev&#x27; =&gt; $INFO[&#x27;lastmod&#x27;],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                  &#x27;summary&#x27; =&gt; &#x27;[&#x27;.$name.&#x27;] &#x27;), $data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &#x27;post&#x27;, $name) . &#x27;&lt;/div&gt;&#x27;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>注释掉。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="问题及解决"></a>问题及解决<a class="hash-link" href="#问题及解决" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="上传的文件与扩展名不符"></a>上传的文件与扩展名不符<a class="hash-link" href="#上传的文件与扩展名不符" title="Direct link to heading">#</a></h3><p>修改 <code>inc/media.php</code> ：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(substr($mime,0,6) == &#x27;image/&#x27;){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$info = getimagesize($file);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if($mime == &#x27;image/gif&#x27; &amp;&amp; $info[2] != 1){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">msg(sprintf(&#x27;php function getimagesize(%s) does not think this is an image/gif file (info[2]=%d) even though %s is the mime type&#x27;,$file,$info[2],$mime));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}elseif($mime == &#x27;image/jpeg&#x27; &amp;&amp; $info[2] != 2){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">msg(sprintf(&#x27;php function getimagesize(%s) does not think this is an image/jpeg file (info[2]=%d) even though %s is the mime type&#x27;,$file,$info[2],$mime));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}elseif($mime == &#x27;image/png&#x27; &amp;&amp; $info[2] != 3){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">msg(sprintf(&#x27;php function getimagesize(%s) does not think this is an image/png file (info[2]=%d) even though %s is the mime type&#x27;,$file,$info[2],$mime));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">This function used to return -1 if the info[2] didn&#x27;t return the right type. Now I just return 0 and show a msg. The debug messages printed out show</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">php function getimagesize(/srv/www/www.ini.unizh.ch/tmp/phpQu74yf) does not think this is an image/jpeg file (info[2]=0) even though image/jpeg is the mime type</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="批量导入用户出现乱码"></a>批量导入用户出现乱码<a class="hash-link" href="#批量导入用户出现乱码" title="Direct link to heading">#</a></h3><p>解决方法：使用 utf8 编码的 .csv 文件</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="参考与致谢"></a>参考与致谢<a class="hash-link" href="#参考与致谢" title="Direct link to heading">#</a></h2><ul><li><a href="https://blog.csdn.net/wszll_Alex/article/details/80246721" target="_blank" rel="noopener noreferrer">dokuwiki 学习（一）—— 增加页面命名空间</a></li><li><a href="https://blog.csdn.net/wszll_Alex/article/details/80246836" target="_blank" rel="noopener noreferrer">dokuwiki 学习（二）—— 新增页面（文章）</a></li><li><a href="https://blog.csdn.net/wszll_Alex/article/details/80252098" target="_blank" rel="noopener noreferrer">dokuwiki 学习（三）—— 删除页面（文章）</a></li><li><a href="https://blog.csdn.net/wszll_Alex/article/details/80252132" target="_blank" rel="noopener noreferrer">dokuwiki 学习（四）—— 移动页面（文章）</a></li><li><a href="https://leekwen.blog.csdn.net/article/details/54907445?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control" target="_blank" rel="noopener noreferrer">dokuwiki 插件的常用配置及其他 Tips</a></li><li><a href="https://wiki.gimo.me/wiki/customize" target="_blank" rel="noopener noreferrer">自定义 DokuWiki</a></li><li><a href="https://forum.dokuwiki.org/d/1297-upload-doesn-t-match-extension/3" target="_blank" rel="noopener noreferrer">Upload doesn&#x27;t match extension - DokuWiki User Forum</a></li><li><a href="https://blog.csdn.net/wszll_Alex/article/details/80252201" target="_blank" rel="noopener noreferrer">dokuwiki 学习（六）—— 增加媒体命名空间</a></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/worst0/Wiki_Docusaurus/edit/main/docs/unlist/团队知识库搭建记录-DokuWiki.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-02-13T09:43:50.000Z" class="lastUpdatedDate_1WI_">2/13/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#拓展" class="table-of-contents__link">拓展</a></li><li><a href="#命名空间与文章" class="table-of-contents__link">命名空间与文章</a></li><li><a href="#新增文章" class="table-of-contents__link">新增文章</a></li><li><a href="#删除文章" class="table-of-contents__link">删除文章</a></li><li><a href="#移动文章--修改名字" class="table-of-contents__link">移动文章 / 修改名字</a></li><li><a href="#定制" class="table-of-contents__link">定制</a><ul><li><a href="#删除页面内的编辑按钮" class="table-of-contents__link">删除页面内的编辑按钮</a></li></ul></li><li><a href="#问题及解决" class="table-of-contents__link">问题及解决</a><ul><li><a href="#上传的文件与扩展名不符" class="table-of-contents__link">上传的文件与扩展名不符</a></li><li><a href="#批量导入用户出现乱码" class="table-of-contents__link">批量导入用户出现乱码</a></li></ul></li><li><a href="#参考与致谢" class="table-of-contents__link">参考与致谢</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.773e5c9a.js"></script>
<script src="/assets/js/main.fdd59226.js"></script>
</body>
</html>