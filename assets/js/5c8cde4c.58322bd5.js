(self.webpackChunkwiki_docusaurus=self.webpackChunkwiki_docusaurus||[]).push([[1598],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return u}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var m=r.createContext({}),s=function(e){var t=r.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(m.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,m=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=s(n),u=i,d=c["".concat(m,".").concat(u)]||c[u]||f[u]||o;return n?r.createElement(d,a(a({ref:t},p),{},{components:n})):r.createElement(d,a({ref:t},p))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=c;var l={};for(var m in t)hasOwnProperty.call(t,m)&&(l[m]=t[m]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var s=2;s<o;s++)a[s]=n[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},9102:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return a},metadata:function(){return l},toc:function(){return m},default:function(){return p}});var r=n(2122),i=n(9756),o=(n(7294),n(3905)),a={id:"\u89e3\u51b3Google\u76f8\u518c\u5bfc\u51fa\u65f6\u95f4\u4fe1\u606f\u4e22\u5931\u95ee\u9898",title:"\u89e3\u51b3 Google \u76f8\u518c\u5bfc\u51fa\u65f6\u95f4\u4fe1\u606f\u4e22\u5931\u95ee\u9898"},l={unversionedId:"\u89e3\u51b3Google\u76f8\u518c\u5bfc\u51fa\u65f6\u95f4\u4fe1\u606f\u4e22\u5931\u95ee\u9898",id:"\u89e3\u51b3Google\u76f8\u518c\u5bfc\u51fa\u65f6\u95f4\u4fe1\u606f\u4e22\u5931\u95ee\u9898",isDocsHomePage:!1,title:"\u89e3\u51b3 Google \u76f8\u518c\u5bfc\u51fa\u65f6\u95f4\u4fe1\u606f\u4e22\u5931\u95ee\u9898",description:"\u5728 Google Takeout \u5bfc\u51fa Google \u76f8\u518c\u540e\uff0c\u5f88\u591a\u7167\u7247\u7684\u65f6\u95f4\u4fe1\u606f\u90fd\u88ab\u53e6\u5b58\u4e3a .json \u6587\u4ef6\u3002\u5982\u4f55\u5c06\u5176\u5bfc\u5165\u5bf9\u5e94\u7167\u7247\u5462\uff1f",source:"@site/docs/\u89e3\u51b3Google\u76f8\u518c\u5bfc\u51fa\u65f6\u95f4\u4fe1\u606f\u4e22\u5931\u95ee\u9898.md",sourceDirName:".",slug:"/\u89e3\u51b3Google\u76f8\u518c\u5bfc\u51fa\u65f6\u95f4\u4fe1\u606f\u4e22\u5931\u95ee\u9898",permalink:"/\u89e3\u51b3Google\u76f8\u518c\u5bfc\u51fa\u65f6\u95f4\u4fe1\u606f\u4e22\u5931\u95ee\u9898",editUrl:"https://github.com/worst0/Wiki_Docusaurus/edit/main/docs/\u89e3\u51b3Google\u76f8\u518c\u5bfc\u51fa\u65f6\u95f4\u4fe1\u606f\u4e22\u5931\u95ee\u9898.md",version:"current",lastUpdatedAt:1620052016,formattedLastUpdatedAt:"5/3/2021",frontMatter:{id:"\u89e3\u51b3Google\u76f8\u518c\u5bfc\u51fa\u65f6\u95f4\u4fe1\u606f\u4e22\u5931\u95ee\u9898",title:"\u89e3\u51b3 Google \u76f8\u518c\u5bfc\u51fa\u65f6\u95f4\u4fe1\u606f\u4e22\u5931\u95ee\u9898"},sidebar:"docs",previous:{title:"\u7528\u7fa4\u6656\u81ea\u5e26\u53cd\u5411\u4ee3\u7406\u5b9e\u73b0 HTTPS \u8bbf\u95ee",permalink:"/\u7528\u7fa4\u6656\u81ea\u5e26\u53cd\u5411\u4ee3\u7406\u5b9e\u73b0HTTPS\u8bbf\u95ee"},next:{title:"\u4f7f\u7528 gitignore \u5ffd\u7565\u7279\u6b8a\u6587\u4ef6",permalink:"/\u4f7f\u7528gitignore\u5ffd\u7565\u7279\u6b8a\u6587\u4ef6"}},m=[{value:"\u53c2\u8003\u4e0e\u81f4\u8c22",id:"\u53c2\u8003\u4e0e\u81f4\u8c22",children:[]}],s={toc:m};function p(e){var t=e.components,n=(0,i.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"\u5728 Google Takeout \u5bfc\u51fa Google \u76f8\u518c\u540e\uff0c\u5f88\u591a\u7167\u7247\u7684\u65f6\u95f4\u4fe1\u606f\u90fd\u88ab\u53e6\u5b58\u4e3a ",(0,o.kt)("inlineCode",{parentName:"p"},".json")," \u6587\u4ef6\u3002\u5982\u4f55\u5c06\u5176\u5bfc\u5165\u5bf9\u5e94\u7167\u7247\u5462\uff1f"),(0,o.kt)("p",null,"\u65b0\u5efa\u4e00\u4e2a Python \u6587\u4ef6 ",(0,o.kt)("inlineCode",{parentName:"p"},"update-data.py"),"\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"from win32file import CreateFile, SetFileTime, GetFileTime, CloseHandle\nfrom win32file  import GENERIC_READ, GENERIC_WRITE, OPEN_EXISTING\nfrom pywintypes import Time\nimport os,json,time\n\n# \u83b7\u53d6\u6307\u5b9a\u540e\u7f00\u7684\u6587\u4ef6\u540d\ndef get_all_file(ext_name):\n    file_list = []\n    datanames = os.listdir()\n    for dataname in datanames:\n        if os.path.splitext(dataname)[1] == ext_name:  #\u76ee\u5f55\u4e0b\u5305\u542b.json\u7684\u6587\u4ef6\n            file_list.append(dataname)\n    return file_list\n\n# \u8bfb\u53d6json\ndef load_json(json_file_name):\n    f = open(json_file_name,'r',encoding = 'UTF-8')\n    text = f.read()\n    dic = json.loads(text)\n    return dic\n\ndef modifyFileTime(filePath, createTime, modifyTime, accessTime, offset):\n    \"\"\"\n    \u7528\u6765\u4fee\u6539\u4efb\u610f\u6587\u4ef6\u7684\u76f8\u5173\u65f6\u95f4\u5c5e\u6027\uff0c\u65f6\u95f4\u683c\u5f0f\uff1aYYYY-MM-DD HH:MM:SS \u4f8b\u5982\uff1a2019-02-02 00:01:02\n    :param filePath: \u6587\u4ef6\u8def\u5f84\u540d\n    :param createTime: \u521b\u5efa\u65f6\u95f4\n    :param modifyTime: \u4fee\u6539\u65f6\u95f4\n    :param accessTime: \u8bbf\u95ee\u65f6\u95f4\n    :param offset: \u65f6\u95f4\u504f\u79fb\u7684\u79d2\u6570,tuple\u683c\u5f0f\uff0c\u987a\u5e8f\u548c\u53c2\u6570\u65f6\u95f4\u5bf9\u5e94\n    \"\"\"\n    try:\n        format = \"%Y-%m-%d %H:%M:%S\"  # \u65f6\u95f4\u683c\u5f0f\n        cTime_t = timeOffsetAndStruct(createTime, format, offset[0])\n        mTime_t = timeOffsetAndStruct(modifyTime, format, offset[1])\n        aTime_t = timeOffsetAndStruct(accessTime, format, offset[2])\n\n        fh = CreateFile(filePath, GENERIC_READ | GENERIC_WRITE, 0, None, OPEN_EXISTING, 0, 0)\n        createTimes, accessTimes, modifyTimes = GetFileTime(fh)\n\n        createTimes = Time(time.mktime(cTime_t))\n        accessTimes = Time(time.mktime(aTime_t))\n        modifyTimes = Time(time.mktime(mTime_t))\n        SetFileTime(fh, createTimes, accessTimes, modifyTimes)\n        CloseHandle(fh)\n        return 0\n    except:\n        return 1\n\n\ndef timeOffsetAndStruct(times, format, offset):\n    return time.localtime(time.mktime(time.strptime(times, format)) + offset)\n\n#\u65e5\u671f\u8f6c\u6362\uff0c\u5c06\u8c37\u6b4c\u7684\u65e5\u671f\u8f6c\u5316\u4e3a\u6570\u503c\ndef time_format(data_string):\n    print(data_string)\n    year = data_string.split('\u5e74')[0]\n    month = data_string.split('\u5e74')[1].split('\u6708')[0]\n    day = data_string.split('\u5e74')[1].split('\u6708')[1].split('\u65e5')[0]\n    add_flag = data_string.split('\u5e74')[1].split('\u6708')[1].split('\u65e5')[1].find('\u4e0b\u5348')\n    hour = data_string.split('\u5e74')[1].split('\u6708')[1].split('\u65e5')[1].split('\u5348')[1].split(':')[0]\n    minute = data_string.split('\u5e74')[1].split('\u6708')[1].split('\u65e5')[1].split('\u5348')[1].split(':')[1]\n    second = data_string.split('\u5e74')[1].split('\u6708')[1].split('\u65e5')[1].split('\u5348')[1].split(':')[2]\n    if add_flag > 0:\n        hour = str(int(hour)+12)\n    return year + '-' + month + '-' +day +' ' + hour + ':'+ minute + ':' + second\n\n\nif __name__ == '__main__':\n    file_name_json = get_all_file('.json')                      #\u83b7\u53d6\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6\u56fe\u7247\u6587\u4ef6\u540dlist\n\n    for fnj in file_name_json:\n        dic = load_json(fnj)                                        #\u63d0\u53d6\u5b57\u5178\u4fe1\u606f\n        st = dic['creationTime']['formatted']                       #\u83b7\u53d6\u6587\u4ef6\u65e5\u671f\n        output_format = time_format(st)                             #\u8f6c\u6362\u65e5\u671f\u683c\u5f0f\n\n        file_name = fnj[0:-5]                                       #\u83b7\u53d6\u5bf9\u5e94\u6587\u4ef6\u7684\u7167\u7247\u540d\u5b57\n        print(file_name)\n        offset = (0, 1, 2)\n        #\u4fee\u6539\u6587\u4ef6\u65e5\u671f\n        modifyFileTime(file_name, output_format, output_format, output_format,offset)\n")),(0,o.kt)("p",null,"\u8fd9\u4e2a\u811a\u672c\u7684\u4f5c\u7528\u662f\u6839\u636e json \u4fee\u6539\u6587\u4ef6\u521b\u5efa\u65e5\u671f\uff0c\u5e76\u5c06\u5176\u5bfc\u5165\u540c\u540d\u7684\u7167\u7247\u3002"),(0,o.kt)("p",null,"\u76f4\u63a5\u5c06\u6b64\u811a\u672c\u653e\u5165\u6bcf\u4e2a\u76f8\u518c\u7684\u76ee\u5f55\u4e2d\u8fd0\u884c\u5373\u53ef\u3002\u6267\u884c\u8fc7\u540e\uff0c\u7167\u7247\u7684\u65f6\u95f4\u4fe1\u606f\u5c31\u56de\u6765\u4e86\u3002"),(0,o.kt)("h2",{id:"\u53c2\u8003\u4e0e\u81f4\u8c22"},"\u53c2\u8003\u4e0e\u81f4\u8c22"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://zhuanlan.zhihu.com/p/356718593"},"\u8c37\u6b4c\u76f8\u518c\u4e0b\u8f7d\u540e\u7684\u65f6\u95f4\u4e22\u5931\u95ee\u9898"))),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u6587\u7ae0\u4f5c\u8005\uff1a",(0,o.kt)("strong",{parentName:"p"},"Power Lin"),(0,o.kt)("br",{parentName:"p"}),"\n","\u539f\u6587\u5730\u5740\uff1a",(0,o.kt)("a",{parentName:"p",href:"https://wiki-power.com"},"https://wiki-power.com"),(0,o.kt)("br",{parentName:"p"}),"\n","\u7248\u6743\u58f0\u660e\uff1a\u6587\u7ae0\u91c7\u7528 ",(0,o.kt)("a",{parentName:"p",href:"https://creativecommons.org/licenses/by/4.0/deed.zh"},"CC BY-NC-SA 4.0")," \u534f\u8bae\uff0c\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002")))}p.isMDXComponent=!0}}]);