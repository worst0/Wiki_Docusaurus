(self.webpackChunkwiki_docusaurus=self.webpackChunkwiki_docusaurus||[]).push([[4417],{3905:function(n,e,t){"use strict";t.d(e,{Zo:function(){return l},kt:function(){return f}});var r=t(7294);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?i(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function c(n,e){if(null==n)return{};var t,r,a=function(n,e){if(null==n)return{};var t,r,a={},i=Object.keys(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var s=r.createContext({}),_=function(n){var e=r.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):o(o({},e),n)),t},l=function(n){var e=_(n.components);return r.createElement(s.Provider,{value:e},n.children)},p={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},d=r.forwardRef((function(n,e){var t=n.components,a=n.mdxType,i=n.originalType,s=n.parentName,l=c(n,["components","mdxType","originalType","parentName"]),d=_(t),f=a,u=d["".concat(s,".").concat(f)]||d[f]||p[f]||i;return t?r.createElement(u,o(o({ref:e},l),{},{components:t})):r.createElement(u,o({ref:e},l))}));function f(n,e){var t=arguments,a=e&&e.mdxType;if("string"==typeof n||a){var i=t.length,o=new Array(i);o[0]=d;var c={};for(var s in e)hasOwnProperty.call(e,s)&&(c[s]=e[s]);c.originalType=n,c.mdxType="string"==typeof n?n:a,o[1]=c;for(var _=2;_<i;_++)o[_]=t[_];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},2551:function(n,e,t){"use strict";t.r(e),t.d(e,{frontMatter:function(){return o},metadata:function(){return c},toc:function(){return s},default:function(){return l}});var r=t(2122),a=t(9756),i=(t(7294),t(3905)),o={id:"\u5c0f\u8f66\u6e38\u534e\u5e7f-\u6bd4\u8d5b",title:"\u5c0f\u8f66\u6e38\u534e\u5e7f - \u6bd4\u8d5b"},c={unversionedId:"archive/\u5c0f\u8f66\u6e38\u534e\u5e7f-\u6bd4\u8d5b",id:"archive/\u5c0f\u8f66\u6e38\u534e\u5e7f-\u6bd4\u8d5b",isDocsHomePage:!1,title:"\u5c0f\u8f66\u6e38\u534e\u5e7f - \u6bd4\u8d5b",description:"\u80cc\u666f",source:"@site/docs/archive/\u5c0f\u8f66\u6e38\u534e\u5e7f-\u6bd4\u8d5b.md",sourceDirName:"archive",slug:"/archive/\u5c0f\u8f66\u6e38\u534e\u5e7f-\u6bd4\u8d5b",permalink:"/Wiki_Docusaurus/archive/\u5c0f\u8f66\u6e38\u534e\u5e7f-\u6bd4\u8d5b",editUrl:"https://github.com/worst0/Wiki_Docusaurus/edit/main/docs/archive/\u5c0f\u8f66\u6e38\u534e\u5e7f-\u6bd4\u8d5b.md",version:"current",lastUpdatedAt:1613210075,formattedLastUpdatedAt:"2/13/2021",frontMatter:{id:"\u5c0f\u8f66\u6e38\u534e\u5e7f-\u6bd4\u8d5b",title:"\u5c0f\u8f66\u6e38\u534e\u5e7f - \u6bd4\u8d5b"}},s=[{value:"\u80cc\u666f",id:"\u80cc\u666f",children:[]},{value:"\u6e90\u7801",id:"\u6e90\u7801",children:[]}],_={toc:s};function l(n){var e=n.components,t=(0,a.Z)(n,["components"]);return(0,i.kt)("wrapper",(0,r.Z)({},_,t,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"\u80cc\u666f"},"\u80cc\u666f"),(0,i.kt)("p",null,"\u6700\u8fd1\u53c2\u52a0\u4e86\u5b66\u6821\u7684\u5bfb\u8ff9\u5c0f\u8f66\u6bd4\u8d5b\uff0c\u5e76\u62ff\u8d70\u4e86\u7b2c\u4e8c\u540d\u7684\u5956\u9879\u3002\u8fd9\u91cc\u5c06\u8d44\u6599\u5f52\u6863\u4e00\u4e0b\u3002"),(0,i.kt)("h2",{id:"\u6e90\u7801"},"\u6e90\u7801"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},'//by Power Lin @ wiki-power.com\n//12:52\n\n#include <AFMotor.h> //L293D \u9a71\u52a8\u5e93\n\nint max = 250; //\u901f\u5ea6\u5feb\nint mid = 0; //\u901f\u5ea6\u4e2d\nint min = -80; //\u901f\u5ea6\u6162\nint vertical_delay = 250; //\u5de6\u53f3\u8f6c 90 \xb0\u7684\u5ef6\u65f6\uff0c\u5f85\u8c03\u8bd5\u6821\u6b63\n\n#define S1 Sx_state[0]\n#define S2 Sx_state[1]\n#define S3 Sx_state[2]\n#define S4 Sx_state[3]\n#define S5 Sx_state[4]\n\nAF_DCMotor M1(1); //\u5b9a\u4e49\u7535\u673a\u5bf9\u8c61\uff0c\u547d\u540d\u4e3a M1\uff0c\u63a5\u4e8e 1 \u53f7\u7aef\u53e3\nAF_DCMotor M2(4);\nAF_DCMotor M3(2);\nAF_DCMotor M4(3);\n\n//function: \u7ea2\u5916\u5149\u7535\u5faa\u8ff9\n#define S1_pin 22\n#define S2_pin 24\n#define S3_pin 26\n#define S4_pin 28\n#define S5_pin 30\n#define CLP_pin 32 //\u5fae\u52a8\u5f00\u5173\n#define Near_pin 34 //\u7ea2\u5916\u58c1\u969c\n\nint Sx_state[5] = {0, 0, 0, 0, 0}; //5 \u4e2a\u7ea2\u5916\u5149\u7535\u7684\u72b6\u6001\nint CLP_state = 0; //\u5fae\u52a8\u5f00\u5173\u72b6\u6001\nint CLP_count = 0; //\u5fae\u52a8\u5f00\u5173\u72b6\u6001\u8ba1\u6570\nint Near_state = 0; //\u7ea2\u5916\u58c1\u969c\u7684\u72b6\u6001\nint error_state = 0; //\u504f\u79fb\u72b6\u6001\nint decide_state = 0; //\u4ea4\u53c9\u8def\u53e3\u9009\u62e9\u72b6\u6001\nint vertical_state = 0; //\u76f4\u89d2\u8f6c\u5f2f\u7684\u72b6\u6001\nint vertical_state_left = 0; //\u76f4\u89d2\u8f6c\u5f2f\u7684\u72b6\u6001\nint stop_state = 0; //\u505c\u4e0b\u72b6\u6001\n\nvoid car_stop() { //\u505c\u6b62\n  M1.run(RELEASE);\n  M2.run(RELEASE);\n  M3.run(RELEASE);\n  M4.run(RELEASE);\n}\nvoid car_forward() { //\u524d\u8fdb\n  motor_run(max, max, max, max);\n}\nvoid car_backward() { //\u540e\u9000\n  motor_run(-max, -max, -max, -max);\n}\nvoid car_left_light() { //\u5c0f\u5de6\u8f6c\n  motor_run(mid, max, mid, max);\n}\nvoid car_left_heavy() { //\u5927\u5de6\u8f6c\n  motor_run(min, max, min, max);\n}\nvoid car_right_light() { //\u5c0f\u53f3\u8f6c\n  motor_run(max, mid, max, mid);\n}\nvoid car_right_heavy() { //\u5927\u53f3\u8f6c\n  motor_run(max, min, max, min);\n}\nvoid car_left_vertical() { //\u5de6\u8f6c 90\xb0\n  motor_run(-max, max, -max, max);\n  delay(vertical_delay);\n}\nvoid car_right_vertical() { //\u53f3\u8f6c 90\xb0\n  motor_run(max, -max, max, -max);\n  delay(vertical_delay);\n}\n\nvoid motor_run(int m1, int m2, int m3, int m4) { //\u8bbe\u7f6e\u901f\u5ea6\n  M1.setSpeed(m1);\n  M2.setSpeed(m2);\n  M3.setSpeed(m3);\n  M4.setSpeed(m4);\n  if (m1 > 0) M1.run(FORWARD);\n  else M1.run(BACKWARD);\n  if (m2 > 0) M2.run(FORWARD);\n  else M2.run(BACKWARD);\n  if (m3 > 0) M3.run(FORWARD);\n  else M3.run(BACKWARD);\n  if (m4 > 0) M4.run(FORWARD);\n  else M4.run(BACKWARD);\n}\n\nvoid setup() {\n  //\u5faa\u8ff9\u521d\u59cb\u5316\n  pinMode(S1_pin, INPUT);\n  pinMode(S2_pin, INPUT);\n  pinMode(S3_pin, INPUT);\n  pinMode(S4_pin, INPUT);\n  pinMode(S5_pin, INPUT);\n  pinMode(CLP_pin, INPUT);\n  pinMode(Near_pin, INPUT);\n\n  //\u84dd\u7259\u521d\u59cb\u5316\n  Serial.begin(9600);\n  Serial.println("hello world");\n  car_stop(); //\u521d\u59cb\u5316\u5148\u5173\u95ed\u7535\u673a\n}\n\nvoid loop() {\n  //\u5faa\u8ff9\u68c0\u6d4b\n  Sx_state[0] = digitalRead(S1_pin);\n  Sx_state[1] = digitalRead(S2_pin);\n  Sx_state[2] = digitalRead(S3_pin);\n  Sx_state[3] = digitalRead(S4_pin);\n  Sx_state[4] = digitalRead(S5_pin);\n  CLP_state = digitalRead(CLP_pin);\n  Near_state = digitalRead(Near_pin);\n  for (int i = 0; i <= 4; i++ ) {\n    if (Sx_state[i] == 0) {\n      Sx_state[i] = 1;\n    } else {\n      Sx_state[i] = 0;\n    }\n  }\n  car_control(); //\u8fd0\u52a8\u7b97\u6cd5\n  //  Serial.println(CLP_count);\n}\n\n//\u5c0f\u8f66\u8fd0\u52a8\u7b97\u6cd5\nvoid car_control() {\n  if (CLP_state == 1 ) {\n    CLP_count++; //\u5fae\u52a8\u5f00\u5173\u8ba1\u6570\u81ea\u52a0\u4e00\n    if (CLP_count >= 1) { //\u649e\u5230\u6321\u677f\u5f80\u56de\u8d70\n      Serial.println("State 1");\n      car_stop(); // \u6b47\u4e00\u6b47\n      delay(500);\n      car_backward(); //\u540e\u9000\n      delay(300);\n      car_left_heavy(); //\u8f6c\u5f2f\n      delay(950);\n    }\n  }\n  else {\n    if (S1 == 0 && S2 == 0 && S3 == 1 && S4 == 0  && S5 == 0)\n      error_state = 0; // \u65e0\u504f\u79fb\n    if (S1 == 0 && S2 == 1 && S3 == 0 && S4 == 0  && S5 == 0)\n      error_state = -1;\n    if (S1 == 0 && S2 == 0 && S3 == 0 && S4 == 1  && S5 == 0)\n      error_state = 1;\n    if (S1 == 1 && S2 == 0 && S3 == 0 && S4 == 0  && S5 == 0)\n      error_state = -2;\n    if (S1 == 0 && S2 == 0 && S3 == 0 && S4 == 0  && S5 == 1)\n      error_state = 2;\n    if (S1 == 1 && S2 == 1 && S3 == 1 && S4 == 0  && S5 == 1)\n      error_state = -3;\n    if (S1 == 0 && S2 == 0 && S3 == 1 && S4 == 1  && S5 == 1) {\n      /*vertical_state++;\n        if (vertical_state == 1 && vertical_state == 2) {\n        error_state = 9; //\u8f6c\u5f2f\u8fdb\u673a\u5173\n        }*/\n      error_state = 3;\n    }\n    if (S1 == 0 && S2 == 1 && S3 == 1 && S4 == 1  && S5 == 0)\n      error_state = 111;\n    if (S1 == 1  && S2 == 1 && S3 == 1 && S4 == 1  && S5 == 1)\n      error_state = 111;\n    if (S1 == 0  && S2 == 1 && S3 == 1 && S4 == 1  && S5 == 1)\n      error_state = 111;\n    if (S1 == 1  && S2 == 1 && S3 == 1 && S4 == 1  && S5 == 0)\n      error_state = 111;\n    if (S1 == 1  && S2 == 1 && S3 == 0 && S4 == 1  && S5 == 1)\n      error_state = 222;\n\n    if (S1 == 1  && S2 == 0 && S3 == 1 && S4 == 1  && S5 == 1)\n      error_state = 222;\n    if (S1 == 1  && S2 == 1 && S3 == 1 && S4 == 0  && S5 == 1)\n      error_state = 222;\n\n    switch (error_state) {\n      case 222: // T \u8def\u53e3\n        //        if (stop_state == 9) {\n        //          car_left_heavy();\n        //          delay(400);\n        //        } else {\n        car_forward();\n        //        }\n        //        stop_state++;\n        break;\n      case 111: //\u4ea4\u53c9\u8def\u53e3\n        car_forward(); // \u76f4\u8d70\n        break;\n      case -3:\n        if (error_state == -3) {\n          car_stop();\n          delay(400);\n          //car_left_vertical(); //11100 \u5de6\u76f4\u89d2 - \u5de6\u8f6c 90\xb0\n          //while (1)car_stop();\n          if (vertical_state == 1) {\n            car_left_heavy(); //00111 \u53f3\u76f4\u89d2 - \u53f3\u8f6c 90\xb0\n            delay(1000);\n          } else {\n            car_left_heavy();\n            delay(400);\n          }\n          vertical_state_left++;\n        } else {\n          car_forward();\n        }\n        break;\n      case 3:\n\n        if (error_state == 3) {\n          car_stop();\n          delay(400);\n\n          if (vertical_state == 0) {\n            car_right_heavy(); //00111 \u53f3\u76f4\u89d2 - \u53f3\u8f6c 90\xb0\n            delay(500);\n          } else {\n            car_right_heavy();\n            //          car_forward();\n          }\n          car_forward(); // \u76f4\u8d70\n          vertical_state++;\n        } else {\n          car_forward();\n        }\n        break;\n\n      case 0:\n        car_forward(); //00100 \u76f4\u8d70\n        break;\n      case -1:\n        car_left_light(); //01000 \u5c0f\u5de6\u8f6c\n        break;\n      case 1:\n        car_right_light(); //00010 \u5c0f\u53f3\u8f6c\n        break;\n      case -2:\n        car_left_heavy(); //10000 \u5927\u5de6\u8f6c\n        break;\n      case 2:\n        car_right_heavy(); //00001 \u5927\u53f3\u8f6c\n        break;\n\n      //case 9:\n      //car_right_heavy();\n      //delay(500);\n      //break;\n      //      case 222:\n      //        car_stop();\n      //        break;\n      default:\n        if (error_state == -2) {\n          car_left_heavy();\n        }\n        else if (error_state == 2) {\n          car_right_heavy();\n        }\n        else\n          car_forward();\n        //car_stop();\n    }\n\n  }\n}\n')),(0,i.kt)("p",null,"\u8d44\u6599\u5b58\u653e\u4e8e ",(0,i.kt)("a",{parentName:"p",href:"https://www.jianguoyun.com/p/DUZ5gZEQ9Z2HBxjxkNsB"},"https://www.jianguoyun.com/p/DUZ5gZEQ9Z2HBxjxkNsB")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u6587\u7ae0\u4f5c\u8005\uff1a",(0,i.kt)("strong",{parentName:"p"},"Power Lin"),(0,i.kt)("br",{parentName:"p"}),"\n","\u539f\u6587\u5730\u5740\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://wiki-power.com"},"https://wiki-power.com"),(0,i.kt)("br",{parentName:"p"}),"\n","\u7248\u6743\u58f0\u660e\uff1a\u6587\u7ae0\u91c7\u7528 ",(0,i.kt)("a",{parentName:"p",href:"https://creativecommons.org/licenses/by/4.0/deed.zh"},"CC BY-NC-SA 4.0")," \u534f\u8bae\uff0c\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002")))}l.isMDXComponent=!0}}]);